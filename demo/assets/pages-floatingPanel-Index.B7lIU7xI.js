import{d as a,r as e,q as t,v as s,S as l,H as o,o as n,c as r,w as u,e as d,n as c,x as i,V as h,y as v,i as m,aa as g,D as f,a as p,b as _,g as w,F as b,h as j,f as x,t as T,u as y}from"./index-B0wV8KWu.js";import{f as I,m as $,O as H,n as M,af as S,z as A,h as B,o as C,ag as D,b as V,c as z,d as F,_ as P,a as U}from"./page-wraper.xrwG2hFo.js";import{_ as Y}from"./wd-cell-group.B-g_Ck6K.js";import{u as k}from"./useTouch.tJxkjQPk.js";import{_ as G,a as K}from"./wd-tabs.DZL84r0T.js";import"./useChildren.D_bqRQP9.js";import"./wd-badge.ie0naOHg.js";import"./wd-sticky-box.CYByJzye.js";import"./wd-resize.DPWFr5q-.js";import"./useTranslate.232Synd_.js";const L=V(a({name:"wd-floating-panel",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...I,height:$(0),anchors:H(),safeAreaInsetBottom:M(!1),showScrollbar:S,duration:A(300),contentDraggable:S},emits:["update:height","height-change"],setup(a,{emit:f}){const p=k(),_=a,w=f,b=e(_.height);let j;const x=e(0),T=e(!1),y=t((()=>({min:_.anchors[0]?_.anchors[0]:100,max:_.anchors[_.anchors.length-1]?_.anchors[_.anchors.length-1]:Math.round(.6*x.value)}))),I=t((()=>_.anchors.length>=2?_.anchors:[y.value.min,y.value.max])),$=t((()=>{const a={height:B(y.value.max),transform:`translateY(calc(100% + ${B(-b.value)}))`,transition:T.value?"none":`transform ${_.duration}ms cubic-bezier(0.18, 0.89, 0.32, 1.28)`};return`${C(a)};${_.customStyle}`})),H=a=>{b.value=a,w("update:height",a)},M=a=>{p.touchStart(a),T.value=!0,j=-b.value},S=a=>{if("content"==a.currentTarget.dataset.id&&!_.contentDraggable)return;p.touchMove(a);const e=p.deltaY.value+j;H(-V(e))},A=()=>{T.value=!1,H(D(I.value,b.value)),b.value!==-j&&w("height-change",{height:b.value})},V=a=>{const e=Math.abs(a),{min:t,max:s}=y.value;return e>s?-(s+.2*(e-s)):e<t?-(t-.2*(t-e)):a};return s((()=>_.height),(a=>{b.value=a})),s(y,(()=>{H(D(I.value,b.value))}),{immediate:!0}),l((()=>{const{windowHeight:a}=o();x.value=a})),(a,e)=>{const t=m,s=g;return n(),r(t,{class:c(`wd-floating-panel ${a.customClass} ${a.safeAreaInsetBottom?"is-safe":""}`),style:v($.value),onTouchstartPassive:M,onTouchmovePassive:S,onTouchend:A,onTouchcancel:A},{default:u((()=>[d(t,{class:c("wd-floating-panel__header")},{default:u((()=>[d(t,{class:c("wd-floating-panel__header-bar")})])),_:1}),d(s,{class:c("wd-floating-panel__content"),"data-id":"content","show-scrollbar":a.showScrollbar,"scroll-y":"",onTouchmove:h(S,["stop","prevent"])},{default:u((()=>[i(a.$slots,"default",{},void 0,!0)])),_:3},8,["show-scrollbar"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-3746633c"]]),O=V(a({__name:"Index",setup(a){const{show:t}=z(),s=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],l=e(0),r=e(0),c=e(0),i=e([]),h=({height:a})=>{t(B(a))};return f((()=>{c.value=o().windowHeight,i.value=[100,Math.round(.4*c.value),Math.round(.7*c.value)],r.value=i.value[1]})),(a,e)=>{const t=p(_("wd-toast"),F),o=p(_("wd-cell"),P),c=p(_("wd-cell-group"),Y),v=p(_("wd-floating-panel"),L),g=p(_("wd-tab"),G),f=m,I=p(_("wd-tabs"),K),$=p(_("page-wraper"),U);return n(),w(b,null,[d(t),d(f,{class:"floating-panel"},{default:u((()=>[d($,null,{default:u((()=>[d(I,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a)},{default:u((()=>[d(g,{title:"基础用法"},{default:u((()=>[d(v,{safeAreaInsetBottom:""},{default:u((()=>[d(c,{border:""},{default:u((()=>[(n(),w(b,null,j(s,(a=>d(o,{key:a,title:a},null,8,["title"]))),64))])),_:1})])),_:1})])),_:1}),d(g,{title:"自定义锚点"},{default:u((()=>[d(v,{height:r.value,"onUpdate:height":e[0]||(e[0]=a=>r.value=a),anchors:i.value,safeAreaInsetBottom:"",onHeightChange:h},{default:u((()=>[d(f,{class:"inner-content"},{default:u((()=>[x("自定义锚点 "+T(i.value.map(y(B)))+" - "+T(y(B)(r.value.toFixed(0))),1)])),_:1})])),_:1},8,["height","anchors"])])),_:1}),d(g,{title:"仅头部拖拽"},{default:u((()=>[d(v,{contentDraggable:!1},{default:u((()=>[d(f,{class:"inner-content"},{default:u((()=>[x("内容区不可以拖拽")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-29c5d28e"]]);export{O as default};
