import{f as e,i as a,n as t,J as l,K as s,b as u,j as o,c as n,d,_ as c,a as i}from"./page-wraper.xrwG2hFo.js";import{d as f,P as r,r as b,v as _,S as p,m as v,U as k,o as m,c as h,w as g,e as w,x as y,y as C,n as $,V,L as j,i as x,a as T,b as z,f as I,u as Q}from"./index-B0wV8KWu.js";import{p as F,r as M,c as O}from"./clickoutside.CJmLG0WC.js";import{u as P}from"./useTouch.tJxkjQPk.js";import{_ as S}from"./demo-block.DzZhMvar.js";import{_ as D}from"./wd-button.BTOOSaL4.js";const U=u(f({name:"wd-swipe-action",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...e,modelValue:a("close"),disabled:t(!1),beforeClose:Function},emits:["click","update:modelValue"],setup(e,{expose:a,emit:t}){const u=e,o=t,n=r(s,null),d=b(""),c=b(0),i=b(0),f=b(!1),T=P(),{proxy:z}=j();function I(e,a){u.disabled||Q().then((([t,l])=>{switch(e){case"close":if(0===i.value)return;J("value",a);break;case"left":S(t);break;case"right":S(-l)}}))}function Q(){return Promise.all([l(".wd-swipe-action__left",!1,z).then((e=>e.width?e.width:0)),l(".wd-swipe-action__right",!1,z).then((e=>e.width?e.width:0))])}function S(e=0){const a=`translate3d(${e}px, 0, 0)`,t=f.value?"none":".6s cubic-bezier(0.18, 0.89, 0.32, 1)";d.value=`\n        -webkit-transform: ${a};\n        -webkit-transition: ${t};\n        transform: ${a};\n        transition: ${t};\n      `,i.value=e}function D(e){u.disabled||0===i.value||(J("click",e=e||"inside"),o("click",{value:e}))}function U(e){u.disabled||(c.value=i.value,T.touchStart(e),n&&n.closeOther?n.closeOther(z):O(z))}function G(e){if(u.disabled)return;if(T.touchMove(e),"vertical"===T.direction.value)return;e.preventDefault(),e.stopPropagation(),f.value=!0;const a=c.value+T.deltaX.value;Q().then((([t,l])=>0===t&&a>0||0===l&&a<0?(S(0),U(e)):0!==t&&a>=t?(S(t),U(e)):0!==l&&-a>=l?(S(-l),U(e)):void S(a)))}function H(){if(u.disabled)return;const e=.3;f.value=!1,Q().then((([a,t])=>{c.value<0&&i.value<0&&i.value-c.value<t*e?(S(-t),o("update:modelValue","right")):c.value>0&&i.value>0&&c.value-i.value<a*e?(S(a),o("update:modelValue","left")):t>0&&c.value>=0&&i.value<0&&Math.abs(i.value)>t*e?(S(-t),o("update:modelValue","right")):a>0&&c.value<=0&&i.value>0&&Math.abs(i.value)>a*e?(S(a),o("update:modelValue","left")):J("swipe")}))}function J(e,a){if("swipe"===e&&0===c.value)return S(0);"swipe"===e&&c.value>0?a="left":"swipe"===e&&c.value<0&&(a="right"),e&&a&&u.beforeClose&&u.beforeClose(e,a),S(0),"close"!==u.modelValue&&o("update:modelValue","close")}return _((()=>u.modelValue),((e,a)=>{I(e,a)}),{deep:!0}),p((()=>{n&&n.pushToQueue?n.pushToQueue(z):F(z),c.value=0,i.value=0,f.value=!1})),v((()=>{f.value=!0,I(u.modelValue),f.value=!1})),k((()=>{n&&n.removeFromQueue?n.removeFromQueue(z):M(z)})),a({close:J}),(e,a)=>{const t=x;return m(),h(t,{class:$(`wd-swipe-action ${e.customClass}`),style:C(e.customStyle),onClick:a[2]||(a[2]=V((e=>D()),["stop"])),onTouchstart:U,onTouchmove:G,onTouchend:H,onTouchcancel:H},{default:g((()=>[w(t,{class:"wd-swipe-action__wrapper",style:C(d.value)},{default:g((()=>[w(t,{class:"wd-swipe-action__left",onClick:a[0]||(a[0]=e=>D("left"))},{default:g((()=>[y(e.$slots,"left",{},void 0,!0)])),_:3}),y(e.$slots,"default",{},void 0,!0),w(t,{class:"wd-swipe-action__right",onClick:a[1]||(a[1]=e=>D("right"))},{default:g((()=>[y(e.$slots,"right",{},void 0,!0)])),_:3})])),_:3},8,["style"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-4e3986a8"]]),G=u(f({__name:"Index",setup(e){const{closeOutside:a}=o(),t=n(),l=b("close"),s=(e,a)=>{"click"===e?t.show(`${e} ${a}导致滑动按钮关闭`):t.show(`${e}导致${a}滑动按钮关闭`)};function u(e){l.value=e}function f({value:e}){t.show(`点击${e}关闭操作按钮`)}function r(e){t.show(`点击了${e}`)}function _(){}return(e,t)=>{const o=T(z("wd-toast"),d),n=T(z("wd-cell"),c),b=x,p=T(z("wd-swipe-action"),U),v=T(z("demo-block"),S),k=T(z("wd-button"),D),y=T(z("page-wraper"),i);return m(),h(y,null,{default:g((()=>[w(o),w(b,{onClick:V(Q(a),["stop"])},{default:g((()=>[w(v,{transparent:"",title:"基本用法"},{default:g((()=>[w(p,null,{right:g((()=>[w(b,{class:"action"},{default:g((()=>[w(b,{class:"button",style:{background:"#fa4350"},onClick:t[0]||(t[0]=e=>r("操作1"))},{default:g((()=>[I("操作1")])),_:1}),w(b,{class:"button",style:{background:"#f0883a"},onClick:t[1]||(t[1]=e=>r("操作2"))},{default:g((()=>[I("操作2")])),_:1}),w(b,{class:"button",style:{background:"#4d80f0"},onClick:t[2]||(t[2]=e=>r("操作3"))},{default:g((()=>[I("操作3")])),_:1})])),_:1})])),default:g((()=>[w(n,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),w(v,{transparent:"",title:"左右滑动"},{default:g((()=>[w(p,null,{left:g((()=>[w(b,{class:"action"},{default:g((()=>[w(b,{class:"button",style:{background:"#fa4350"}},{default:g((()=>[I("操作1")])),_:1}),w(b,{class:"button",style:{background:"#f0883a"}},{default:g((()=>[I("操作2")])),_:1}),w(b,{class:"button",style:{background:"#4d80f0"}},{default:g((()=>[I("操作3")])),_:1})])),_:1})])),right:g((()=>[w(b,{class:"action"},{default:g((()=>[w(b,{class:"button",style:{background:"#fa4350"}},{default:g((()=>[I("操作4")])),_:1}),w(b,{class:"button",style:{background:"#f0883a"}},{default:g((()=>[I("操作5")])),_:1}),w(b,{class:"button",style:{background:"#4d80f0"}},{default:g((()=>[I("操作6")])),_:1})])),_:1})])),default:g((()=>[w(n,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),w(v,{transparent:"",title:"切换按钮"},{default:g((()=>[w(p,{modelValue:l.value,"onUpdate:modelValue":t[3]||(t[3]=e=>l.value=e),"before-close":s},{left:g((()=>[w(b,{class:"action"},{default:g((()=>[w(b,{class:"button",style:{background:"#fa4350"}},{default:g((()=>[I("操作1")])),_:1}),w(b,{class:"button",style:{background:"#f0883a"}},{default:g((()=>[I("操作2")])),_:1}),w(b,{class:"button",style:{background:"#4d80f0"}},{default:g((()=>[I("操作3")])),_:1})])),_:1})])),right:g((()=>[w(b,{class:"action"},{default:g((()=>[w(b,{class:"button",style:{background:"#fa4350"}},{default:g((()=>[I("操作4")])),_:1}),w(b,{class:"button",style:{background:"#f0883a"}},{default:g((()=>[I("操作5")])),_:1}),w(b,{class:"button",style:{background:"#4d80f0"}},{default:g((()=>[I("操作6")])),_:1})])),_:1})])),default:g((()=>[w(n,{title:"标题文字",value:"内容"})])),_:1},8,["modelValue"])])),_:1}),w(b,{class:"button-group"},{default:g((()=>[w(b,{onClick:V(_,["stop"])},{default:g((()=>[w(k,{size:"small",onClick:t[4]||(t[4]=e=>u("left"))},{default:g((()=>[I("打开左边")])),_:1})])),_:1}),w(b,{onClick:V(_,["stop"])},{default:g((()=>[w(k,{size:"small",onClick:t[5]||(t[5]=e=>u("close"))},{default:g((()=>[I("关闭所有")])),_:1})])),_:1}),w(b,{onClick:V(_,["stop"])},{default:g((()=>[w(k,{size:"small",onClick:t[6]||(t[6]=e=>u("right"))},{default:g((()=>[I("打开右边")])),_:1})])),_:1})])),_:1}),w(v,{transparent:"",title:"点击事件"},{default:g((()=>[w(p,{onClick:f},{right:g((()=>[w(b,{class:"action"},{default:g((()=>[w(b,{class:"button",style:{background:"#fa4350"}},{default:g((()=>[I("操作1")])),_:1}),w(b,{class:"button",style:{background:"#f0883a"}},{default:g((()=>[I("操作2")])),_:1}),w(b,{class:"button",style:{background:"#4d80f0"}},{default:g((()=>[I("操作3")])),_:1})])),_:1})])),default:g((()=>[w(n,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),w(v,{transparent:"",title:"禁用滑动按钮"},{default:g((()=>[w(p,{disabled:""},{right:g((()=>[w(b,{class:"action"},{default:g((()=>[w(b,{class:"button",style:{background:"#fa4350"}},{default:g((()=>[I("操作1")])),_:1}),w(b,{class:"button",style:{background:"#f0883a"}},{default:g((()=>[I("操作2")])),_:1}),w(b,{class:"button",style:{background:"#4d80f0"}},{default:g((()=>[I("操作3")])),_:1})])),_:1})])),default:g((()=>[w(n,{title:"标题文字",value:"内容"})])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-cbf249d3"]]);export{G as default};
