import{d as e,r as t,q as a,v as r,o as s,c as o,w as l,e as n,n as c,y as u,f as i,t as p,p as g,i as d,a as f,b as m}from"./index-B0wV8KWu.js";import{f as v,m as b,n as _,w,o as h,r as y,s as k,t as x,v as j,b as N,a as T}from"./page-wraper.xrwG2hFo.js";import{_ as C}from"./demo-block.DzZhMvar.js";import{_ as O}from"./wd-button.BTOOSaL4.js";const $=N(e({name:"wd-progress",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...v,percentage:b(0),hideText:_(!1),color:{type:[String,Array]},duration:b(30),status:String},setup(e){const f=e,m=t(""),v=t(0),b=t(0);let _=null;const N=a((()=>h({background:m.value,width:`${v.value}%`,"transition-duration":b.value*f.duration*.001+"s"}))),T=a((()=>f.status?`is-${f.status}`:"")),C=a((()=>{let e="";switch(f.status){case"danger":e="close-outline";break;case"success":e="check-outline";break;case"warning":e="warn-bold"}return e}));async function O(){const{percentage:e,color:t}=f;if(!y(t)||k(t)&&0===t.length)return b.value=Math.abs(e-v.value),await x(),void(v.value=e);if(v.value===e)return;const a=k(t)?t:[t];!function(e){const t=(r=e,r.every((e=>"string"==typeof e))),a=$(e);var r;if(!t&&!a)throw Error("Color must be String or Object with color and percentage");if(a&&e.some((({percentage:e})=>Number.isNaN(e))))throw Error("All the percentage must can be formatted to Number")}(a);const r=function(e){const t=100/e.length;return $(e)?e.sort(((e,t)=>e.percentage-t.percentage)):e.map(((e,a)=>({color:e,percentage:(a+1)*t})))}(a);v.value>e?function(e,t){e.some((e=>{if(t<=e.percentage)return M(t,e.color),!0}))}(r,e):function(e,t){e.some(((a,r)=>{if(v.value<a.percentage&&a.percentage<=t)return M(a.percentage,a.color),!0;r===e.length-1&&M(t,a.color)}))}(r,e)}function $(e){return e.every((e=>j(e)&&Object.prototype.hasOwnProperty.call(e,"color")&&Object.prototype.hasOwnProperty.call(e,"percentage")))}function M(e,t){if(_)return;const{duration:a}=f;b.value=Math.abs(e-v.value),setTimeout((()=>{v.value=e,m.value=t,_=setTimeout((()=>{_&&clearTimeout(_),_=null,O()}),b.value*a)}),50)}return r((()=>[f.percentage,f.color,f.duration]),(()=>{var e;e=f.percentage,(Number.isNaN(e)||e<0||e>100)&&console.error("The value of percentage must be between 0 and 100"),O()}),{immediate:!0}),(e,t)=>{const a=d;return s(),o(a,{class:c(`wd-progress ${e.customClass}`),style:u(e.customStyle)},{default:l((()=>[n(a,{class:"wd-progress__outer"},{default:l((()=>[n(a,{class:c(`wd-progress__inner ${T.value}`),style:u(N.value)},null,8,["class","style"])])),_:1}),e.hideText?e.status?(s(),o(w,{key:1,"custom-class":`wd-progress__label wd-progress__icon ${T.value}`,name:C.value,color:"string"==typeof e.color?e.color:""},null,8,["custom-class","name","color"])):g("",!0):(s(),o(a,{key:0,class:"wd-progress__label"},{default:l((()=>[i(p(e.percentage)+"%",1)])),_:1}))])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-38fe3713"]]),M=e({__name:"Index",setup(e){const a=t(30),r=t(100),c=t(50),u=()=>{c.value=Math.min(c.value+10,100)},p=()=>{c.value=Math.max(c.value-10,0)},g=t([{color:"yellow",percentage:30},{color:"red",percentage:60},{color:"blue",percentage:80},{color:"black",percentage:90}]);return(e,t)=>{const d=f(m("wd-progress"),$),v=f(m("demo-block"),C),b=f(m("wd-button"),O),_=f(m("page-wraper"),T);return s(),o(_,null,{default:l((()=>[n(v,{title:"基本用法"},{default:l((()=>[n(d,{percentage:a.value},null,8,["percentage"])])),_:1}),n(v,{title:"不显示进度文字"},{default:l((()=>[n(d,{percentage:60,"hide-text":""})])),_:1}),n(v,{title:"进度条状态"},{default:l((()=>[n(d,{percentage:100,"hide-text":"",status:"success"}),n(d,{percentage:80,"hide-text":"",status:"danger"}),n(d,{percentage:90,"hide-text":"",status:"warning"})])),_:1}),n(v,{title:"修改颜色"},{default:l((()=>[n(d,{percentage:80,color:"#00c740"})])),_:1}),n(v,{title:"颜色数组"},{default:l((()=>[n(d,{percentage:100,color:["#00c740","#ffb300","#e2231a","#0083ff"]}),n(d,{percentage:r.value,color:g.value},null,8,["percentage","color"])])),_:1}),n(v,{title:"动态设置"},{default:l((()=>[n(d,{percentage:c.value},null,8,["percentage"]),n(b,{"custom-style":"margin-right: 10px;",onClick:u,type:"success",size:"small"},{default:l((()=>[i("+10")])),_:1}),n(b,{onClick:p,type:"error",size:"small"},{default:l((()=>[i("-10")])),_:1})])),_:1})])),_:1})}}});export{M as default};
