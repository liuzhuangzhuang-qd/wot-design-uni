import{d as e,r as l,v as a,q as s,S as o,o as n,c as t,w as i,n as r,y as u,x as c,p as d,e as p,g as f,f as m,t as h,F as y,i as g,a0 as v,j as _}from"./index-B0wV8KWu.js";import{f as b,i as w,m as x,n as k,z as S,O as C,P as I,g as $,r as P,w as j,Q as V,o as W,t as E,b as L}from"./page-wraper.xrwG2hFo.js";import{u as q}from"./useTranslate.232Synd_.js";const T=L(e({name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...b,customInputClass:w(""),customLabelClass:w(""),placeholder:String,placeholderStyle:String,placeholderClass:w(""),cursorSpacing:x(0),cursor:x(-1),selectionStart:x(-1),selectionEnd:x(-1),adjustPosition:k(!0),holdKeyboard:k(!1),confirmType:w("done"),confirmHold:k(!1),focus:k(!1),type:w("text"),maxlength:{type:Number,default:-1},disabled:k(!1),alwaysEmbed:k(!1),alignRight:k(!1),modelValue:S(""),showPassword:k(!1),clearable:k(!1),readonly:k(!1),useSuffixSlot:k(!1),usePrefixSlot:k(!1),prefixIcon:String,suffixIcon:String,showWordLimit:k(!1),label:String,labelWidth:w(""),useLabelSlot:k(!1),size:String,error:k(!1),center:k(!1),noBorder:k(!1),required:k(!1),prop:String,rules:C(),clearTrigger:w("always"),focusWhenClear:k(!0),ignoreCompositionEvent:k(!0),inputmode:w("text")},emits:["update:modelValue","clear","change","blur","focus","input","keyboardheightchange","confirm","clicksuffixicon","clickprefixicon","click"],setup(e,{emit:b}){const w=e,x=b,{translate:k}=q("input"),S=l(!1),C=l(!1),L=l(!1),T=l(!1),z=l(""),B=I();a((()=>w.focus),(e=>{L.value=e}),{immediate:!0,deep:!0}),a((()=>w.modelValue),(e=>{z.value=P(e)?String(e):""}),{immediate:!0,deep:!0});const{parent:H}=$(V),K=s((()=>P(w.placeholder)?w.placeholder:k("placeholder"))),M=s((()=>{const{disabled:e,readonly:l,clearable:a,clearTrigger:s}=w;return!(!a||l||e||!z.value||!("always"===s||"focus"===w.clearTrigger&&T.value))})),O=s((()=>{const{disabled:e,readonly:l,maxlength:a,showWordLimit:s}=w;return Boolean(!e&&!l&&P(a)&&a>-1&&s)})),A=s((()=>H&&w.prop&&H.errorMessages&&H.errorMessages[w.prop]?H.errorMessages[w.prop]:"")),F=s((()=>{let e=!1;if(H&&H.props.rules){const l=H.props.rules;for(const a in l)Object.prototype.hasOwnProperty.call(l,a)&&a===w.prop&&Array.isArray(l[a])&&(e=l[a].some((e=>e.required)))}return w.required||w.rules.some((e=>e.required))||e})),R=s((()=>`wd-input  ${w.label||w.useLabelSlot?"is-cell":""} ${w.center?"is-center":""} ${B.border.value?"is-border":""} ${w.size?"is-"+w.size:""} ${w.error?"is-error":""} ${w.disabled?"is-disabled":""}  ${z.value&&String(z.value).length>0?"is-not-empty":""}  ${w.noBorder?"is-no-border":""} ${w.customClass}`)),G=s((()=>`wd-input__label ${w.customLabelClass} ${F.value?"is-required":""}`)),N=s((()=>`wd-input__placeholder  ${w.placeholderClass}`)),Q=s((()=>w.labelWidth?W({"min-width":w.labelWidth,"max-width":w.labelWidth}):""));function U(){S.value=!S.value}async function D(){C.value=!0,T.value=!1,z.value="",w.focusWhenClear&&(L.value=!1),await E(),w.focusWhenClear&&(L.value=!0,T.value=!0),x("change",{value:""}),x("update:modelValue",z.value),x("clear")}async function J(){await E(150),C.value?C.value=!1:(T.value=!1,x("blur",{value:z.value}))}function X({detail:e}){T.value=!0,x("focus",e)}function Y({detail:e}){x("update:modelValue",z.value),x("input",e)}function Z({detail:e}){x("keyboardheightchange",e)}function ee({detail:e}){x("confirm",e)}function le(){x("clicksuffixicon")}function ae(){x("clickprefixicon")}function se(e){x("click",e)}return o((()=>{z.value=function(e){const{maxlength:l}=w;return P(l)&&-1!==l&&String(e).length>l?e.toString().slice(0,l):e}(z.value),x("update:modelValue",z.value)})),(e,l)=>{const a=g,s=v,o=_;return n(),t(a,{class:r(R.value),style:u(e.customStyle),onClick:se},{default:i((()=>[e.label||e.useLabelSlot?(n(),t(a,{key:0,class:r(G.value),style:u(Q.value)},{default:i((()=>[e.prefixIcon||e.usePrefixSlot?(n(),t(a,{key:0,class:"wd-input__prefix"},{default:i((()=>[e.prefixIcon&&!e.usePrefixSlot?(n(),t(j,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:ae},null,8,["name"])):c(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):d("",!0),p(a,{class:"wd-input__label-inner"},{default:i((()=>[e.label?(n(),f(y,{key:0},[m(h(e.label),1)],64)):c(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):d("",!0),p(a,{class:"wd-input__body"},{default:i((()=>[p(a,{class:"wd-input__value"},{default:i((()=>[!e.prefixIcon&&!e.usePrefixSlot||e.label?d("",!0):(n(),t(a,{key:0,class:"wd-input__prefix"},{default:i((()=>[e.prefixIcon?(n(),t(j,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:ae},null,8,["name"])):d("",!0),c(e.$slots,"prefix",{},void 0,!0)])),_:3})),p(s,{class:r(["wd-input__inner",e.prefixIcon?"wd-input__inner--prefix":"",O.value?"wd-input__inner--count":"",e.alignRight?"is-align-right":"",e.customInputClass]),type:e.type,password:e.showPassword&&!S.value,modelValue:z.value,"onUpdate:modelValue":l[0]||(l[0]=e=>z.value=e),placeholder:K.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:L.value,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-spacing":e.cursorSpacing,"placeholder-style":e.placeholderStyle,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"always-embed":e.alwaysEmbed,"placeholder-class":N.value,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:Y,onFocus:X,onBlur:J,onConfirm:ee,onKeyboardheightchange:Z},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class","ignoreCompositionEvent","inputmode"]),e.readonly?(n(),t(a,{key:1,class:"wd-input__readonly-mask"})):d("",!0),M.value||e.showPassword||e.suffixIcon||O.value||e.$slots.suffix?(n(),t(a,{key:2,class:"wd-input__suffix"},{default:i((()=>[M.value?(n(),t(j,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:D})):d("",!0),e.showPassword?(n(),t(j,{key:1,"custom-class":"wd-input__icon",name:S.value?"view":"eye-close",onClick:U},null,8,["name"])):d("",!0),O.value?(n(),t(a,{key:2,class:"wd-input__count"},{default:i((()=>[p(o,{class:r([z.value&&String(z.value).length>0?"wd-input__count-current":"",String(z.value).length>e.maxlength?"is-error":""])},{default:i((()=>[m(h(String(z.value).length),1)])),_:1},8,["class"]),m(" /"+h(e.maxlength),1)])),_:1})):d("",!0),e.suffixIcon?(n(),t(j,{key:3,"custom-class":"wd-input__icon",name:e.suffixIcon,onClick:le},null,8,["name"])):d("",!0),c(e.$slots,"suffix",{},void 0,!0)])),_:3})):d("",!0)])),_:3}),A.value?(n(),t(a,{key:0,class:"wd-input__error-message"},{default:i((()=>[m(h(A.value),1)])),_:1})):d("",!0)])),_:3})])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-0b15c8cc"]]);export{T as _};
