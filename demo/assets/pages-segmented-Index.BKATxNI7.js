import{f as e,R as a,n as t,i as s,t as l,J as o,h as n,o as i,v as u,b as d,d as r,l as p,a as v}from"./page-wraper.xrwG2hFo.js";import{d as c,X as m,q as f,v as _,m as b,o as g,c as y,w as h,g as w,h as x,F as k,e as I,n as S,y as j,i as C,u as U,x as $,f as z,t as A,at as V,L as q,r as N,a as R,b as X,l as E}from"./index-B0wV8KWu.js";import{_ as F}from"./demo-block.DzZhMvar.js";import{_ as G}from"./wd-button.BTOOSaL4.js";const H=d(c({name:"wd-segmented",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...e,value:a([String,Number]),disabled:t(!1),size:s("middle"),options:{type:Array,required:!0,default:()=>[]},vibrateShort:t(!1)},emits:["update:value","change","click"],setup(e,{expose:a,emit:t}){const s=".wd-segmented__item",d=e,r=t,p=m({activeIndex:0,activeStyle:""}),v=f((()=>d.disabled||!(!d.options[0]||!u(d.options[0]))&&d.options[0].disabled));_((()=>d.value),(()=>{R(),N(),d.vibrateShort&&V({})}),{immediate:!1});const{proxy:c}=q();function N(e=!0){o(s,!0,c).then((a=>{const t=a[p.activeIndex],s={position:"absolute",width:n(t.width),"z-index":0},l=a.slice(0,p.activeIndex).reduce(((e,a)=>e+Number(a.width)),0);l&&(s.transform=`translateX(${l}px)`),e&&(s.transition="all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1)"),p.activeStyle=i(s)}))}function R(){const e=d.options.findIndex((e=>(u(e)?e.value:e)==d.value));if(e>=0)p.activeIndex=e;else{const e=u(d.options[0])?d.options[0].value:d.options[0];r("update:value",e),r("change",u(d.options[0])?d.options[0]:{value:e})}}return b((async()=>{R(),await l(),N(!1)})),a({updateActiveStyle:N}),(e,a)=>{const t=C;return g(),y(t,{class:S(`wd-segmented ${e.customClass}`),style:j(e.customStyle)},{default:h((()=>[(g(!0),w(k,null,x(e.options,((a,s)=>(g(),y(t,{class:S(`wd-segmented__item is-${e.size} ${p.activeIndex===s?"is-active":""} ${e.disabled||U(u)(a)&&a.disabled?"is-disabled":""}`),onClick:e=>function(e,a){if(d.disabled||u(e)&&e.disabled)return;const t=u(e)?e.value:e;p.activeIndex=a,N(),r("update:value",t),r("change",u(e)?e:{value:t}),r("click",u(e)?e:{value:t})}(a,s),key:s},{default:h((()=>[I(t,{class:"wd-segmented__item-label"},{default:h((()=>[e.$slots.label?$(e.$slots,"label",{key:0,option:U(u)(a)?a:{value:a}},void 0,!0):(g(),w(k,{key:1},[z(A(U(u)(a)?a.value:a),1)],64))])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),I(t,{class:S("wd-segmented__item--active "+(v.value?"is-disabled":"")),style:j(p.activeStyle)},null,8,["class","style"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-d826b72d"]]),J=d(c({__name:"Index",setup(e){const a=N(["评论","点赞","贡献","打赏"]),t=N([{value:"李雷",disabled:!1,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/redpanda.jpg"}},{value:"韩梅梅",disabled:!1,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/capybara.jpg"}},{value:"林涛",disabled:!0,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/panda.jpg"}},{value:"Tom",disabled:!1,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/meng.jpg"}}]),s=N("简介"),l=N("详情"),o=N("评论"),n=N("打赏"),i=N("韩梅梅"),u=N("评论");function d(e){console.log(e)}const c=N("点赞"),m=N(),f=N(!1);function _(){f.value=!0}function b(){var e;null==(e=m.value)||e.updateActiveStyle()}return(e,w)=>{const x=R(X("wd-toast"),r),k=R(X("wd-segmented"),H),S=C,j=R(X("demo-block"),F),U=E,$=R(X("wd-button"),G),V=R(X("wd-popup"),p),q=R(X("page-wraper"),v);return g(),y(S,null,{default:h((()=>[I(x),I(q,null,{default:h((()=>[I(j,{title:"大型分段器",transparent:""},{default:h((()=>[I(S,{class:"section"},{default:h((()=>[I(k,{options:a.value,value:s.value,"onUpdate:value":w[0]||(w[0]=e=>s.value=e),size:"large",onChange:d},null,8,["options","value"])])),_:1})])),_:1}),I(j,{title:"默认分段器",transparent:""},{default:h((()=>[I(S,{class:"section"},{default:h((()=>[I(k,{options:a.value,value:l.value,"onUpdate:value":w[1]||(w[1]=e=>l.value=e)},null,8,["options","value"])])),_:1})])),_:1}),I(j,{title:"小型分段器",transparent:""},{default:h((()=>[I(S,{class:"section"},{default:h((()=>[I(k,{options:a.value,value:o.value,"onUpdate:value":w[2]||(w[2]=e=>o.value=e),size:"small"},null,8,["options","value"])])),_:1})])),_:1}),I(j,{title:"带振动效果的分段器",transparent:""},{default:h((()=>[I(S,{class:"section"},{default:h((()=>[I(k,{options:a.value,value:n.value,"onUpdate:value":w[3]||(w[3]=e=>n.value=e),"vibrate-short":!0},null,8,["options","value"])])),_:1})])),_:1}),I(j,{title:"禁用分段器",transparent:""},{default:h((()=>[I(S,{class:"section"},{default:h((()=>[I(k,{options:a.value,value:u.value,"onUpdate:value":w[4]||(w[4]=e=>u.value=e),disabled:""},null,8,["options","value"])])),_:1})])),_:1}),I(j,{title:"自定义渲染分段器标签",transparent:""},{default:h((()=>[I(S,{class:"section"},{default:h((()=>[I(k,{options:t.value,value:i.value,"onUpdate:value":w[5]||(w[5]=e=>i.value=e),"vibrate-short":!0,onChange:d},{label:h((({option:e})=>[I(S,{class:"section-slot"},{default:h((()=>[I(U,{style:{"border-radius":"50%",width:"32px",height:"32px"},src:e.payload.avatar},null,8,["src"]),I(S,{class:"name"},{default:h((()=>[z(A(e.value),1)])),_:2},1024)])),_:2},1024)])),_:1},8,["options","value"])])),_:1})])),_:1}),I(j,{title:"在弹出框中使用",transparent:""},{default:h((()=>[I(S,{class:"section"},{default:h((()=>[I($,{onClick:_},{default:h((()=>[z("打开弹窗")])),_:1})])),_:1})])),_:1}),I(V,{modelValue:f.value,"onUpdate:modelValue":w[7]||(w[7]=e=>f.value=e),position:"bottom",onAfterEnter:b,closable:"","custom-style":"height: 200px;padding: 0 24rpx;"},{default:h((()=>[I(S,{class:"title"},{default:h((()=>[z("在弹出框中使用")])),_:1}),I(k,{options:a.value,value:c.value,"onUpdate:value":w[6]||(w[6]=e=>c.value=e),onChange:d,ref_key:"segmentedRef",ref:m},null,8,["options","value"])])),_:1},8,["modelValue"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-d36245c1"]]);export{J as default};
